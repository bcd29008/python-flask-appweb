-- MySQL Script generated by MySQL Workbench
-- Thu Apr  8 10:12:44 2021
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';


-- -----------------------------------------------------
-- Table `Usuario`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `Usuario` ;

CREATE TABLE IF NOT EXISTS `Usuario` (
  `idUsuario` INT NOT NULL AUTO_INCREMENT,
  `username` VARCHAR(45) NOT NULL,
  `password` VARCHAR(300) NOT NULL,
  `nome` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`idUsuario`))
ENGINE = InnoDB
AUTO_INCREMENT = 3
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `Contato`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `Contato` ;

CREATE TABLE IF NOT EXISTS `Contato` (
  `idContato` INT NOT NULL AUTO_INCREMENT,
  `idUsuario` INT NOT NULL,
  `nome` VARCHAR(45) NOT NULL,
  `dataNasc` DATE NULL DEFAULT NULL,
  PRIMARY KEY (`idContato`, `idUsuario`),
  INDEX `fk_Contato_Usuario1_idx` (`idUsuario` ASC) VISIBLE,
  CONSTRAINT `fk_Contato_Usuario1`
    FOREIGN KEY (`idUsuario`)
    REFERENCES `Usuario` (`idUsuario`))
ENGINE = InnoDB
AUTO_INCREMENT = 5
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `Telefone`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `Telefone` ;

CREATE TABLE IF NOT EXISTS `Telefone` (
  `idTelefone` INT NOT NULL AUTO_INCREMENT,
  `idContato` INT NOT NULL,
  `rotulo` VARCHAR(45) NOT NULL,
  `numero` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idTelefone`),
  INDEX `fk_Telefone_Contato_idx` (`idContato` ASC) VISIBLE,
  CONSTRAINT `fk_Telefone_Contato`
    FOREIGN KEY (`idContato`)
    REFERENCES `Contato` (`idContato`))
ENGINE = InnoDB
AUTO_INCREMENT = 6
DEFAULT CHARACTER SET = utf8mb4
COLLATE = utf8mb4_0900_ai_ci;


-- -----------------------------------------------------
-- Table `Grupo`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `Grupo` ;

CREATE TABLE IF NOT EXISTS `Grupo` (
  `idGrupo` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(45) NOT NULL,
  `idUsuario` INT NOT NULL,
  PRIMARY KEY (`idGrupo`),
  INDEX `fk_Grupos_Usuario1_idx` (`idUsuario` ASC) VISIBLE,
  CONSTRAINT `fk_Grupos_Usuario1`
    FOREIGN KEY (`idUsuario`)
    REFERENCES `Usuario` (`idUsuario`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MembroGrupo`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `MembroGrupo` ;

CREATE TABLE IF NOT EXISTS `MembroGrupo` (
  `Grupo_idGrupo` INT NOT NULL,
  `Contato_idContato` INT NOT NULL,
  `Contato_idUsuario` INT NOT NULL,
  `ingresso` DATE NULL,
  PRIMARY KEY (`Grupo_idGrupo`, `Contato_idContato`, `Contato_idUsuario`),
  INDEX `fk_Grupo_has_Contato_Contato1_idx` (`Contato_idContato` ASC, `Contato_idUsuario` ASC) VISIBLE,
  INDEX `fk_Grupo_has_Contato_Grupo1_idx` (`Grupo_idGrupo` ASC) VISIBLE,
  CONSTRAINT `fk_MembroGrupo_Grupo1`
    FOREIGN KEY (`Grupo_idGrupo`)
    REFERENCES `Grupo` (`idGrupo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_MembroGrupo_Contato1`
    FOREIGN KEY (`Contato_idContato` , `Contato_idUsuario`)
    REFERENCES `Contato` (`idContato` , `idUsuario`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Data for table `Usuario`
-- -----------------------------------------------------
START TRANSACTION;
INSERT INTO `Usuario` (`idUsuario`, `username`, `password`, `nome`) VALUES (1, 'juca', 'pbkdf2:sha256:150000$RkZsRDyX$1d0393991b0d68657e2a53c40bd338703691d5d78edc3a039907702a9fd548c4', 'Juca Nobre');
INSERT INTO `Usuario` (`idUsuario`, `username`, `password`, `nome`) VALUES (2, 'maria', 'pbkdf2:sha256:150000$qFXiRA3w$605a361c7e9099ee94b4fc358755851c87e9d584081cb3f652df97e3d79994a9', 'Maria Alice');

COMMIT;


-- -----------------------------------------------------
-- Data for table `Contato`
-- -----------------------------------------------------
START TRANSACTION;
INSERT INTO `Contato` (`idContato`, `idUsuario`, `nome`, `dataNasc`) VALUES (1, 1, 'Pedro Paulo', '1989-01-11');
INSERT INTO `Contato` (`idContato`, `idUsuario`, `nome`, `dataNasc`) VALUES (2, 1, 'José Jaime', '1991-03-13');
INSERT INTO `Contato` (`idContato`, `idUsuario`, `nome`, `dataNasc`) VALUES (3, 2, 'Ana Clara', '1990-02-10');
INSERT INTO `Contato` (`idContato`, `idUsuario`, `nome`, `dataNasc`) VALUES (4, 2, 'Juliana Silva', '1998-04-14');

COMMIT;


-- -----------------------------------------------------
-- Data for table `Telefone`
-- -----------------------------------------------------
START TRANSACTION;
INSERT INTO `Telefone` (`idTelefone`, `idContato`, `rotulo`, `numero`) VALUES (1, 1, 'casa', '(48) 3381-2800');
INSERT INTO `Telefone` (`idTelefone`, `idContato`, `rotulo`, `numero`) VALUES (2, 1, 'celular', '(48) 99111-0000');
INSERT INTO `Telefone` (`idTelefone`, `idContato`, `rotulo`, `numero`) VALUES (3, 2, 'celular', '(48) 99222-0000');
INSERT INTO `Telefone` (`idTelefone`, `idContato`, `rotulo`, `numero`) VALUES (4, 3, 'celular', '(48) 99333-0000');
INSERT INTO `Telefone` (`idTelefone`, `idContato`, `rotulo`, `numero`) VALUES (5, 4, 'casa', '(48) 3381-0000');

COMMIT;


-- -----------------------------------------------------
-- Data for table `Grupo`
-- -----------------------------------------------------
START TRANSACTION;
INSERT INTO `Grupo` (`idGrupo`, `nome`, `idUsuario`) VALUES (DEFAULT, 'Trabalho', 1);
INSERT INTO `Grupo` (`idGrupo`, `nome`, `idUsuario`) VALUES (DEFAULT, 'Família', 1);
INSERT INTO `Grupo` (`idGrupo`, `nome`, `idUsuario`) VALUES (DEFAULT, 'Empresa', 2);
INSERT INTO `Grupo` (`idGrupo`, `nome`, `idUsuario`) VALUES (DEFAULT, 'Colegas', 2);

COMMIT;


-- -----------------------------------------------------
-- Data for table `MembroGrupo`
-- -----------------------------------------------------
START TRANSACTION;
INSERT INTO `MembroGrupo` (`Grupo_idGrupo`, `Contato_idContato`, `Contato_idUsuario`, `ingresso`) VALUES (1, 1, 1, '2010-01-01');
INSERT INTO `MembroGrupo` (`Grupo_idGrupo`, `Contato_idContato`, `Contato_idUsuario`, `ingresso`) VALUES (2, 2, 1, '2011-01-01');
INSERT INTO `MembroGrupo` (`Grupo_idGrupo`, `Contato_idContato`, `Contato_idUsuario`, `ingresso`) VALUES (3, 3, 2, '2020-02-02');
INSERT INTO `MembroGrupo` (`Grupo_idGrupo`, `Contato_idContato`, `Contato_idUsuario`, `ingresso`) VALUES (3, 4, 2, '2020-02-03');

COMMIT;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
